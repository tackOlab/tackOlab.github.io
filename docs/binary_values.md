<script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax:{inlineMath:[['\$','\$'],['\\(','\\)']],processEscapes:true},CommonHTML: {matchFontHeight:false}});</script>
<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>

# 10進数
我々は日常的に10進数を用いて数値を表現・理解している．
10進数では，各桁の重みが$10^n$であり，各桁に使用できる数字は$0$から$9$の10種類である．ある数は各桁の数字にその重みをかけることで表すことができる．

$1523 = 1\times 10^3 + 5\times 10^2 + 2\times 10^1 + 3\times 10^0$

# N進数
10進数の表現方法は，容易に任意の整数$N$を用いたN進数に拡張できる．
N進数では，各桁の重みが$N^n$であり，各桁に使用できる数字は$0$から$N-1$のN種類である．ある数は各桁の数字にその重みをかけることで表すことができる．

# 2進数
2進数では，各桁の重みが$2^n$であり，各桁に使用できる数字は$0$と$1$の2種類である．ある数は各桁の数字にその重みをかけることで表すことができる．

$(56)_{10} = 1\times 2^5 + 1\times 2^4 + 1\times 2^3 + 0\times 2^2 + 0\times 2^1 + 0\times 2^0 = (111000)_2$

# コンピュータ内部のデータ
コンピュータ内部では，あらゆるデータは数値であり，またそれらの数値は2進数を用いて表現されている．メモリは有限であり，またひとつのデータを表す数値の範囲も有限である．

C/C++言語などでは，変数の型が存在する．これは，変数に格納されるデータのコンピュータ内部でのビット長に対応する．以下に整数型の型とそのビット長を示す．

|型|ビット長|値の取りうる範囲|
|---|---:|:---:|
|char|8|-128 〜 127|
|short|16|-32768 〜 32767|
|int|32|-2147483648〜2147483647|
|long long|64|-9223372036854775808〜9223372036854775807|

## 負の数
上記の表において，`char`型は8bitでその範囲は-128〜127となっている．では，負の数は2進数でどのように表現されるのだろうか？

### 2の補数
コンピュータ内部では，特に断りのない限り，整数値は2の補数表現をとる．
2の補数表現では，最初に，その数値のビット長を決める必要がある．次に，最上位の桁の重みを$-2^n$とする．`char`型を例にとると，そのビット長は8であるので，例えば-128, 127は以下のように表される．

$(-128)_{10}=1\times (-2^7) + 0\times 2^6+ 0\times 2^5 +0\times 2^4 +0\times 2^3+0\times 2^2 +0\times 2^1+0\times 2^0= (10000000)_2$

$(-127)_10=1\times (-2^7) + 0\times 2^6+ 0\times 2^5 +0\times 2^4 +0\times 2^3+0\times 2^2 +0\times 2^1+1\times 2^0= (10000001)_2$

- 練習問題: 8ビットの2の補数における以下の数の表現を求めよ．
  - $100$
  - $-1$

- 練習問題: 4ビットの2の補数における以下の数の表現を求めよ．
  - $-1$

## オーバーフロー（桁あふれ）
以下のコードを実行した結果，変数$b$の値はいくつになっているだろうか？

```c
char a = 127;
char b = a + 1;
```

前述のとおり，`char`型の変数には-127〜128の範囲の値しか格納することはできない．本来$127+1=128$であるが，128は範囲外の数値である．以下に，コンピュータ内部で行われる計算過程を示す．

\begin{align}
 & 01111111 \cr
 +) & 00000001 \cr
 \hline \cr
 = & 00000000
\end{align}

足し算の結果，9ビット目に桁上りのビット"1"が出現するが，これは8ビットに収まらないため，破棄されるのである．このように，桁上りの結果がある変数のビット長に収まらないことをオーバーフロー（桁あふれ）と呼ぶ．オーバーフローを意識せずコーディングすると，意図していないオーバーフローが発生し，計算結果が予期しない値となるため注意が必要である．

## ビット演算
### ビットシフト
TBD
### ビット単位の論理演算
TBD

## 固定小数点演算
TBD

----
[チートシート目次に戻る](./index.md)
